// Covers: core language extensions failure diagnostics suite

//=== CASE 115_lambda_capture_forbidden_fail
// Expect compile fail: 1
// Expect error contains: lambda captures are not supported yet

func main() -> u64 {
    var cap: u64 = 7;
    var f: u64 = func (x: u64) -> u64 { x + cap };
    return f(1);
}
//=== END

//=== CASE 116_named_argument_unknown_param_fail
// Expect compile fail: 1
// Expect error contains: unknown named argument

func addx(a: u64, b: u64 = 1) -> u64 {
    return a + b;
}

func main() -> u64 {
    return addx(a: 1, c: 2);
}
//=== END

//=== CASE 117_missing_required_argument_fail
// Expect compile fail: 1
// Expect error contains: missing required argument

func must_have_a_case117(a: u64, b: u64 = 9) -> u64 {
    return a + b;
}

func main() -> u64 {
    return must_have_a_case117(b: 1);
}
//=== END

//=== CASE 118_variadic_must_be_last_fail
// Expect compile fail: 1
// Expect error contains: variadic parameter must be the last parameter

func bad(...rest: u64, tail: u64) -> u64 {
    return rest + tail;
}

func main() -> u64 {
    return bad(1, 2);
}
//=== END

//=== CASE 119_variadic_cannot_have_default_fail
// Expect compile fail: 1
// Expect error contains: variadic parameter cannot have default value

func bad(...rest: u64 = 1) -> u64 {
    return rest;
}

func main() -> u64 {
    return bad();
}
//=== END

//=== CASE 120_throw_outside_try_fail
// Expect compile fail: 1
// Expect error contains: throw can only be used inside try

func main() -> u64 {
    throw 1;
    return 0;
}
//=== END

//=== CASE 121_throw_inside_nested_loop_fail
// Expect compile fail: 1
// Expect error contains: throw inside nested loop/switch is not supported

func main() -> u64 {
    try {
        while (1) {
            throw 1;
        }
    } catch {
    }
    return 0;
}
//=== END

//=== CASE 122_try_requires_handler_fail
// Expect compile fail: 1
// Expect error contains: try statement requires catch and/or finally block

func main() -> u64 {
    try {
        var x: u64 = 1;
        x = x + 1;
    }
    return 0;
}
//=== END

//=== CASE 123_named_args_on_instance_method_not_supported_fail
// Expect compile fail: 1
// Expect error contains: named arguments are not supported for instance method calls yet

struct BoxFail {
    public v: u64;
}

impl BoxFail {
    public func set(a: u64, b: u64) -> u64 {
        self.v = a + b;
        return self.v;
    }
}

func main() -> u64 {
    var b: BoxFail = BoxFail { 0 };
    return b.set(b: 2, a: 1);
}
//=== END
