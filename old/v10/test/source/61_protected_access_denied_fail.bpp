// Covers: compile-fail for protected member access from non-descendant
// Expect compile fail: 1
// Expect error contains: method access denied

struct BaseProtected {
    protected value: i64;
}

impl BaseProtected {
    public func init(self: *BaseProtected, v: i64) {
        self.value = v;
    }

    protected func read(self: *BaseProtected) -> i64 {
        return self.value;
    }
}

struct Stranger {
    public x: i64;
}

impl Stranger {
    public func steal(self: *Stranger, b: *BaseProtected) -> i64 {
        self.x = 0;
        return b.read();
    }
}

func main() -> i64 {
    var s: Stranger;
    var b: BaseProtected;
    b.init(9);
    return s.steal(&b);
}
