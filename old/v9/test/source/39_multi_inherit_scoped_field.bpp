// Covers: multiple inheritance layout + parent-scoped field access
// Expect exit code: 0

struct Animal {
    public hp: u64;
}

struct Flyer {
    public altitude: u64;
}

struct Dragon : Animal, Flyer {
    public fire_power: u64;
}

struct Lion {
    public roar: u64;
}

struct Tiger {
    public roar: u64;
}

struct Liger : Lion, Tiger {
    public power: u64;
}

struct Mammal : Animal {
    public fur: u64;
}

struct Dog : Mammal {
    public tail: u64;
}

func sum_dragon(d: *Dragon) -> u64 {
    return d.hp + d.altitude + d.fire_power;
}

func sum_liger(l: *Liger) -> u64 {
    return l.<Lion>roar + l.<Tiger>roar + l.power;
}

func main() -> u64 {
    var d: Dragon;
    d.hp = 100;
    d.altitude = 200;
    d.fire_power = 300;
    if (sum_dragon(&d) != 600) { return 1; }

    var x: Liger;
    x.<Lion>roar = 10;
    x.<Tiger>roar = 20;
    x.power = 30;
    if (sum_liger(&x) != 60) { return 2; }

    var p: *Liger = &x;
    p.<Lion>roar = 11;
    p.<Tiger>roar = 22;
    p.power = 33;
    if (sum_liger(p) != 66) { return 3; }

    var dog: Dog;
    dog.<Animal>hp = 7;
    dog.fur = 9;
    dog.tail = 11;
    if (dog.<Animal>hp + dog.fur + dog.tail != 27) { return 4; }

    return 0;
}
