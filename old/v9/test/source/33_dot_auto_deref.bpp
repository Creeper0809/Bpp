// Covers: dot operator for struct + pointer member access and method calls
// Mode: ssa
// Opt: O0
// Expect exit code: 0

struct Pair {
    public a: i64;
    public b: i64;
}

impl Pair {
    public func sum(self: *Pair) -> i64 {
        return self.a + self.b;
    }
}

func main(argc, argv) -> i64 {
    // Import

    // Setup
    var p: Pair;
    var pp: *Pair = &p;

    // Execution
    p.a = 1;
    p.b = 2;
    if (p.a + p.b != 3) { return 1; }

    pp.a = 10;
    pp.b = 20;
    if (pp.a + pp.b != 30) { return 2; }

    var s: i64 = pp.sum();
    if (s != 30) { return 3; }

    // Assertion
    return 0;
}
