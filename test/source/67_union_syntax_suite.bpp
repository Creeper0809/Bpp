// Covers: union syntax/semantic suite

//=== CASE 67_union_basic
// Covers: union declaration, sizeof(union), union literal init (single initializer), and member load semantics
// Mode: ssa
// Opt: O1
// Expect exit code: 0

union Number {
    public as_u64: u64;
    public as_u8: u8;
}

func main() -> u64 {
    var v: Number = Number{257};

    if (sizeof(Number) != 8) { return 1; }
    if (v.as_u64 != 257) { return 2; }
    if (v.as_u8 != 1) { return 3; }

    return 0;
}
//=== END

//=== CASE 68_union_multi_init_fail
// Covers: union literal must not accept multiple positional initializers
// Expect compile fail: 1
// Expect error contains: union literal accepts at most one initializer

union UMulti {
    a: u64;
    b: u64;
}

func main() -> u64 {
    var v: UMulti = UMulti{1, 2};
    return v.a;
}
//=== END

//=== CASE 69_union_inheritance_fail
// Covers: union must not support inheritance list
// Expect compile fail: 1
// Expect error contains: union cannot declare inheritance list

struct BaseForUnion {
    x: u64;
}

union UInherit: BaseForUnion {
    y: u64;
}

func main() -> u64 {
    return 0;
}
//=== END
