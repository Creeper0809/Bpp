// Covers: protected field/method access from descendant + super method/field usage
// Expect exit code: 0

struct Base {
    protected value: i64;
}

impl Base {
    public func init(self: *Base, v: i64) {
        self.value = v;
    }

    protected func bump(self: *Base, d: i64) -> i64 {
        self.value = self.value + d;
        return self.value;
    }
}

struct Child : Base {
    public extra: i64;
}

impl Child {
    public func init_child(self: *Child, v: i64, e: i64) {
        super.init(v);
        self.extra = e;
    }

    public func bump_and_sum(self: *Child) -> i64 {
        var v: i64 = super.bump(5);
        return v + super.value + self.extra;
    }
}

func main() -> i64 {
    var c: Child;
    c.init_child(7, 9);
    var out: i64 = c.bump_and_sum();
    // bump: 7 -> 12, then 12 + 12 + 9 = 33
    if (out != 33) { return 1; }
    return 0;
}
