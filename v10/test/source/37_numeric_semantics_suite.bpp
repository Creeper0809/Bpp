// Covers: float arithmetic + signed/unsigned shift/compare semantics (old 37, 44)
// Mode: ssa|nossa
// Opt: O0|O1
// Expect exit code: 0

func add(a: f64, b: f64) -> f64 {
    return a + b;
}

func main() -> u64 {
    // old 37 path
    var a: f64 = 1.5;
    var b: f64 = 2.25;

    var c: f64 = add(a, b);
    if (c == 3.75) { }
    else { return 1; }

    var d: f64 = c * 2.0;
    if (d > 7.0) { }
    else { return 2; }

    var e: f64 = d / 2.0;
    if (e < 3.0) { return 3; }

    var f: f64 = -e;
    if (f >= 0.0) { return 4; }

    // old 44 path
    var u0: u64 = 0;
    if (u0 < 0) { return 101; }
    if (!(u0 >= 0)) { return 102; }

    var s0: i64 = -1;
    if (!(s0 < 0)) { return 103; }
    if (s0 >= 0) { return 104; }

    var s1: i64 = -8;
    var s1r: i64 = s1 >> 1;
    if (s1r != -4) { return 105; }

    var u1: u64 = 0 - 8;
    var u1r: u64 = u1 >> 1;
    if (u1r != (u1 / 2)) { return 106; }

    var folded_signed: i64 = -8 >> 1;
    if (folded_signed != -4) { return 107; }

    return 0;
}
