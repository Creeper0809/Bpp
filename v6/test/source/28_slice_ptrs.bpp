// Covers: slice of pointer elements ( []*u8 ) indexing/assignment
// Expect exit code: 0

func main(argc, argv) -> i64 {
    // Import

    // Setup
    var bytes: [4]u8;
    bytes[0] = 65;
    bytes[1] = 66;
    bytes[2] = 67;
    bytes[3] = 68;

    var ptrs: [4]*u8;
    ptrs[0] = &bytes[0];
    ptrs[1] = &bytes[1];
    ptrs[2] = &bytes[2];
    ptrs[3] = &bytes[3];

    var slice_ptrs: []*u8 = slice(&ptrs[0], 4);

    // Execution
    if (*slice_ptrs[0] != 65) { return 1; }
    if (*slice_ptrs[1] != 66) { return 2; }
    if (*slice_ptrs[2] != 67) { return 3; }
    if (*slice_ptrs[3] != 68) { return 4; }

    slice_ptrs[1] = &bytes[3];
    if (*slice_ptrs[1] != 68) { return 5; }

    var sum: i64 = 0;
    for (var i: i64 = 0; i < 4; i = i + 1) {
        sum = sum + *slice_ptrs[i];
    }
    if (sum != 65 + 68 + 67 + 68) { return 6; }

    // Assertion
    return 0;
}
