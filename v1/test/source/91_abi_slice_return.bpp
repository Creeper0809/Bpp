// Covers: ABI slice return smoke (ptr+len in rax/rdx)
// Mode: ssa
// Opt: O1
// Expect exit code: 0

// Import

// Setup
func make_slice(p: *u64, n: u64) -> []u64 {
    return slice(p, n);
}

func main() -> u64 {
    // Execution
    var arr: [3]u64;
    arr[0] = 1;
    arr[1] = 2;
    arr[2] = 3;
    var s: []u64 = make_slice(arr, 3);
    var total: u64 = s[0] + s[1] + s[2];

    // Assertion
    if (total != 6) { return 1; }
    return 0;
}
